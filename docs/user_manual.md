# VyOS Web UI 用户手册

## 目录
1. [简介](#简介)
2. [系统要求](#系统要求)
3. [安装和配置](#安装和配置)
4. [用户认证](#用户认证)
5. [主界面介绍](#主界面介绍)
6. [网络配置](#网络配置)
7. [监控功能](#监控功能)
8. [用户管理](#用户管理)
9. [系统设置](#系统设置)
10. [故障排除](#故障排除)
11. [常见问题](#常见问题)

## 简介

### 什么是 VyOS Web UI？

VyOS Web UI 是一个现代化的 Web 界面，为 VyOS 网络操作系统提供直观的管理体验。通过这个界面，网络管理员可以轻松地配置路由、防火墙、接口等网络功能，监控系统状态，并管理用户账户。

### 主要功能
- 用户友好的图形界面
- 网络配置管理（接口、路由、防火墙等）
- 实时系统监控
- 用户管理和权限控制
- 配置备份和恢复
- 系统日志查看

## 系统要求

### 硬件要求
- **处理器**: 2 GHz 双核处理器或更高
- **内存**: 4 GB RAM（推荐 8 GB）
- **存储**: 10 GB 可用空间
- **网络**: 10/100/1000 Mbps 以太网连接

### 软件要求
- **操作系统**: Linux (Ubuntu 20.04+, CentOS 8+, Debian 10+), Windows Server 2019+, macOS 10.15+
- **浏览器**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **数据库**: SQLite (内置), MySQL 8.0+ (可选)
- **Docker**: 版本 20.10+ (如果使用容器部署)

### 网络要求
- 访问 VyOS 系统的网络连接
- HTTP/HTTPS 端口 (通常 80/443) 访问权限
- WebSockets 支持（用于实时监控）

## 安装和配置

### Docker 安装（推荐）

1. 确保系统已安装 Docker 和 Docker Compose
2. 下载预配置的 Docker Compose 文件：
```bash
curl -o docker-compose.yml https://raw.githubusercontent.com/vyos/web-ui/main/docker/docker-compose.yml
```

3. 修改配置文件以适应您的环境：
```bash
vim docker-compose.yml
```

4. 启动服务：
```bash
docker-compose up -d
```

5. 访问 Web 界面：
打开浏览器并导航到 `http://your-server-ip:3000`

### 从源代码安装

1. 克隆项目仓库：
```bash
git clone https://github.com/vyos/web-ui.git
cd vyos/web-ui
```

2. 安装前端依赖：
```bash
cd frontend
npm install
npm run build
```

3. 安装后端依赖：
```bash
cd ../backend
cargo build --release
```

4. 配置环境变量：
```bash
cp .env.example .env
vim .env
```

5. 启动服务：
```bash
# 启动后端
cd ../backend
./target/release/vyos-web-backend

# 在另一个终端启动前端（开发模式）
cd ../frontend
npm run dev
```

### 初始配置

首次访问系统时，您需要创建管理员账户：

1. 打开 Web 浏览器并访问 VyOS Web UI 地址
2. 点击 "Register New Account" 或 "Create Admin User"
3. 输入管理员凭据：
   - 用户名: `admin`
   - 电子邮箱: `admin@yourdomain.com`
   - 密码: 至少 8 位，包含字母、数字和特殊字符
4. 确认密码并点击 "Create Account"
5. 登录到系统

## 用户认证

### 登录

1. 打开 VyOS Web UI 登录页面
2. 输入用户名和密码
3. 点击 "Sign In" 按钮
4. 成功后将被重定向到仪表板

### 注册新用户（需要管理员权限）

1. 导航到 "Users" > "User Management"
2. 点击 "Add New User" 按钮
3. 输入用户信息：
   - 用户名
   - 电子邮箱
   - 密码
   - 角色（管理员、普通用户等）
4. 点击 "Create User"

### 密码重置

如果您忘记了密码：

1. 在登录页面点击 "Forgot Password?"
2. 输入您的电子邮件地址
3. 检查您的电子邮件以获取重置链接
4. 点击链接并按照提示创建新密码

### 双因素认证（可选）

如果启用了双因素认证：

1. 输入用户名和密码
2. 输入来自身份验证器应用的代码
3. 点击 "Verify" 继续

## 主界面介绍

### 仪表板（Dashboard）

仪表板提供系统的概览信息：

- **系统状态**: 显示 CPU、内存、磁盘使用率
- **网络活动**: 当前网络流量统计
- **最近事件**: 显示最近的系统事件和警报
- **快速操作**: 常用功能的快捷方式

### 导航菜单

左侧导航菜单包含以下部分：

- **仪表板**: 系统概览
- **网络配置**: 接口、路由、防火墙等
- **监控**: 系统和网络监控
- **用户**: 用户管理
- **系统**: 系统设置和配置

## 网络配置

### 接口配置

#### 查看接口列表
1. 导航到 "Network Config" > "Interfaces"
2. 界面将显示所有可用网络接口的状态

#### 添加新接口
1. 点击 "Add Interface" 按钮
2. 选择接口类型（Ethernet, VLAN, Bond, Loopback）
3. 配置接口参数：
   - 接口名称
   - IP 地址和子网掩码
   - 描述（可选）
4. 点击 "Save Configuration"

#### 修改现有接口
1. 在接口列表中找到目标接口
2. 点击 "Edit" 按钮
3. 修改所需参数
4. 点击 "Update Configuration"

### 路由配置

#### 查看路由表
1. 导航到 "Network Config" > "Routing"
2. 查看当前活动路由

#### 添加静态路由
1. 点击 "Add Route" 按钮
2. 填写路由信息：
   - 目标网络
   - 网关
   - 度量值（可选）
   - 出站接口（可选）
3. 点击 "Add Route"

#### 删除路由
1. 在路由列表中找到目标路由
2. 点击 "Remove" 按钮
3. 确认删除操作

### 防火墙配置

#### 查看防火墙规则
1. 导航到 "Network Config" > "Firewall"
2. 查看现有的防火墙规则

#### 添加防火墙规则
1. 点击 "Add Rule" 按钮
2. 配置规则参数：
   - 规则名称
   - 序列号（决定规则优先级）
   - 动作（接受、拒绝、丢弃）
   - 协议（TCP, UDP, ICMP, ALL）
   - 源地址（可选）
   - 目标地址（可选）
   - 源端口（可选）
   - 目标端口（可选）
   - 接口（可选）
3. 点击 "Add Rule"

#### 修改防火墙规则
1. 在规则列表中找到目标规则
2. 点击 "Edit" 按钮
3. 修改所需参数
4. 点击 "Update Rule"

### DHCP 配置

#### DHCP 服务管理
1. 导航到 "Network Config" > "DHCP"
2. 查看 DHCP 作用域和服务状态

#### 添加 DHCP 作用域
1. 点击 "Add Scope" 按钮
2. 配置作用域参数：
   - 作用域名称
   - 网络地址和子网掩码
   - IP 地址池范围
   - 租约时间
   - 默认网关
   - DNS 服务器
3. 点击 "Create Scope"

## 监控功能

### 实时监控

#### 系统监控
1. 导航到 "Monitoring" > "System Metrics"
2. 查看实时 CPU、内存、磁盘使用情况
3. 图表自动更新以显示最新数据

#### 网络监控
1. 导航到 "Monitoring" > "Network Traffic"
2. 查看实时网络流量统计
3. 选择特定接口查看详细信息

#### 自定义监控视图
1. 在监控页面点击 "Custom View" 按钮
2. 选择要显示的指标
3. 配置时间范围和更新频率
4. 保存视图为个人仪表板

### 告警管理

#### 查看告警
1. 导航到 "Monitoring" > "Alerts"
2. 查看当前和历史告警
3. 按严重程度、时间或类型过滤告警

#### 配置告警规则
1. 点击 "Alert Rules" 选项卡
2. 点击 "Add Rule" 按钮
3. 配置告警条件：
   - 监控指标
   - 阈值
   - 时间窗口
   - 通知方式
4. 点击 "Save Rule"

#### 告警通知
系统支持以下通知方式：
- 电子邮件
- SNMP trap
- Webhook

## 用户管理

### 用户账户管理

#### 查看用户列表
1. 导航到 "Users" > "User Management"
2. 查看所有系统用户及其状态

#### 添加新用户
1. 点击 "Add User" 按钮
2. 输入用户信息：
   - 用户名
   - 电子邮箱
   - 全名（可选）
   - 角色分配
3. 点击 "Create User"

#### 修改用户信息
1. 在用户列表中找到目标用户
2. 点击 "Edit" 按钮
3. 修改用户信息
4. 点击 "Save Changes"

#### 禁用/启用用户账户
1. 找到目标用户
2. 点击用户状态切换按钮
3. 确认操作

### 角色和权限管理

#### 查看角色列表
1. 导航到 "Users" > "Roles"
2. 查看所有可用角色

#### 创建新角色
1. 点击 "Add Role" 按钮
2. 输入角色信息：
   - 角色名称
   - 描述
   - 权限分配
3. 点击 "Create Role"

#### 分配权限
权限分为以下类别：
- 网络配置权限
- 监控权限
- 用户管理权限
- 系统管理权限

## 系统设置

### 一般设置

#### 系统信息
1. 导航到 "System" > "General Settings"
2. 查看系统版本、运行时间等信息
3. 可配置以下选项：
   - 系统名称
   - 时区
   - 日期/时间格式

#### 网络设置
配置管理接口的网络参数：
- IP 地址
- 子网掩码
- 默认网关
- DNS 服务器

### 安全设置

#### 证书管理
1. 导航到 "System" > "Security"
2. 管理 SSL 证书
3. 上传新的证书或生成自签名证书

#### 访问控制
配置 IP 白名单或黑名单：
- 允许的 IP 地址范围
- 拒绝的 IP 地址范围
- 访问时间限制

### 备份和恢复

#### 创建备份
1. 导航到 "System" > "Backup & Restore"
2. 点击 "Create Backup"
3. 选择要备份的数据：
   - 用户配置
   - 网络配置
   - 系统设置
   - 监控数据（可选）
4. 下载备份文件

#### 恢复配置
1. 点击 "Restore from Backup"
2. 上传备份文件
3. 选择要恢复的配置类型
4. 确认恢复操作

### 日志管理

#### 查看系统日志
1. 导航到 "System" > "Logs"
2. 查看不同类型的日志：
   - 系统日志
   - 安全日志
   - 网络事件日志
3. 使用过滤器搜索特定条目

#### 日志导出
1. 选择日期范围和日志类型
2. 点击 "Export Logs"
3. 选择导出格式（CSV, JSON, TXT）
4. 下载日志文件

## 故障排除

### 常见问题诊断

#### 无法登录
症状：登录失败或出现错误消息

解决方案：
1. 检查用户名和密码是否正确
2. 确认系统时间和时区设置正确
3. 清除浏览器缓存和 Cookie
4. 尝试在隐私模式下登录
5. 检查系统日志中的错误信息

#### 网络配置不生效
症状：配置保存但未应用到系统

解决方案：
1. 检查是否有语法错误
2. 确认网络服务正在运行
3. 查看应用配置的日志
4. 尝试手动重启相关服务
5. 验证配置语法

#### 监控数据缺失
症状：监控图表为空或数据过时

解决方案：
1. 检查数据采集服务状态
2. 验证网络连接性
3. 确认监控代理配置正确
4. 重启监控服务
5. 检查系统资源是否充足

### 日志分析

#### 关键日志位置
- **前端日志**: 浏览器开发者工具 > Console
- **后端日志**: 控制台输出或日志文件
- **数据库日志**: 数据库日志目录
- **系统日志**: /var/log/vyos-web-ui/

#### 错误代码解释
- **401**: 未授权 - 检查认证状态
- **403**: 禁止访问 - 检查用户权限
- **404**: 资源不存在 - 检查 API 端点
- **500**: 服务器内部错误 - 检查后端日志

### 性能问题

#### 界面响应慢
1. 检查网络连接速度
2. 确认服务器资源充足
3. 查看并发用户数量
4. 检查数据库查询性能

#### API 响应时间长
1. 检查数据库连接池设置
2. 优化数据库查询
3. 调整缓存配置
4. 监控服务器资源使用情况

## 常见问题

### Q: 如何重置管理员密码？
A: 如果您是系统管理员，可以通过以下步骤重置密码：
1. 在数据库中直接修改用户密码哈希
2. 或使用命令行工具重置：`vyos-cli reset-password admin`

### Q: 支持哪些浏览器？
A: VyOS Web UI 支持最新的主流浏览器，包括 Chrome、Firefox、Safari 和 Edge。推荐使用最新版本以获得最佳体验。

### Q: 如何备份网络配置？
A: 您可以通过 "System" > "Backup & Restore" 页面创建完整备份，或者通过 "Network Config" 页面导出特定配置。

### Q: 是否支持 LDAP 集成？
A: 当前版本支持本地用户认证，LDAP 集成计划在未来版本中实现。

### Q: 监控数据保存多长时间？
A: 监控数据的保留时间取决于系统配置，默认情况下保留 30 天的数据。

### Q: 如何联系技术支持？
A: 您可以通过以下方式获得支持：
- 访问官方文档：https://docs.vyos.io
- 加入社区论坛：https://forum.vyos.io
- 报告问题：https://github.com/vyos/web-ui/issues

### Q: 是否可以离线使用？
A: VyOS Web UI 需要与 VyOS 系统保持连接才能正常工作，因为它需要与底层系统进行实时通信。

## 附录

### 快捷键
- `Ctrl + S`: 保存当前配置
- `Ctrl + R`: 刷新当前页面
- `Ctrl + F`: 在页面内搜索
- `Esc`: 取消当前操作

### API 参考
完整的 API 文档可在 `/api/docs` 路径下访问（需要认证）。

### 术语表
- **ACL**: 访问控制列表 (Access Control List)
- **DHCP**: 动态主机配置协议 (Dynamic Host Configuration Protocol)
- **DNS**: 域名系统 (Domain Name System)
- **NAT**: 网络地址转换 (Network Address Translation)
- **QoS**: 服务质量 (Quality of Service)
- **VPN**: 虚拟专用网络 (Virtual Private Network)
- **VLAN**: 虚拟局域网 (Virtual Local Area Network)

### 版本历史
- **v1.0.0**: 初始版本，包含基本网络配置和监控功能
- **v1.1.0**: 添加用户管理和高级安全功能
- **v1.2.0**: 改进性能和用户界面体验

### 许可证信息
VyOS Web UI 是开源软件，采用 MIT 许可证。您可以自由使用、修改和分发此软件。